<!DOCTYPE html>
<html>
<head>
    <title>Test JWT Login</title>
</head>
<body>
    <h1>Test JWT Login</h1>
    
    <h2>Test 1: Direct to Django (port 8000)</h2>
    <button onclick="testDirect()">Test Direct Login</button>
    <pre id="result1"></pre>
    
    <h2>Test 2: Through Next.js Proxy (port 3000)</h2>
    <button onclick="testProxy()">Test Proxy Login</button>
    <pre id="result2"></pre>
    
    <script>
        async function testDirect() {
            const result = document.getElementById('result1');
            try {
                const response = await fetch('http://localhost:8000/api/admin/auth/login/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: 'admin', password: 'admin123' })
                });
                
                result.textContent = `Status: ${response.status}\n`;
                const data = await response.json();
                result.textContent += JSON.stringify(data, null, 2);
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
            }
        }
        
        async function testProxy() {
            const result = document.getElementById('result2');
            try {
                const response = await fetch('/api/admin/auth/login/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: 'admin', password: 'admin123' })
                });
                
                result.textContent = `Status: ${response.status}\n`;
                const data = await response.json();
                result.textContent += JSON.stringify(data, null, 2);
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>
